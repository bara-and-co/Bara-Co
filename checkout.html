<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout | Bara & Co</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica, sans-serif;}
body{background:#0f0f0f;color:#f5f5f5;}

.container{
  max-width:1200px;
  margin:60px auto;
  display:flex;
  gap:60px;
  padding:0 20px;
}

.left{flex:65%;}
.right{
  flex:35%;
  background:#1a1a1a;
  padding:30px;
  border-radius:14px;
  position:sticky;
  top:40px;
  animation:fadeIn .8s ease;
}

h2{
  font-weight:300;
  letter-spacing:1px;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:14px;
  margin-bottom:15px;
  background:#1a1a1a;
  border:1px solid #333;
  color:white;
  border-radius:8px;
  transition:.3s;
}

input:focus{
  border:1px solid #c6a14a;
  outline:none;
}

.btn{
  width:100%;
  padding:16px;
  background:black;
  border:1px solid #c6a14a;
  color:white;
  border-radius:8px;
  cursor:pointer;
  transition:.3s;
}

.btn:hover{
  background:#c6a14a;
  color:black;
}

.summary-item{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
  font-size:14px;
}

.total{
  display:flex;
  justify-content:space-between;
  margin-top:20px;
  font-size:20px;
  font-weight:bold;
}

.steps{
  display:flex;
  justify-content:space-between;
  margin-bottom:40px;
  font-size:12px;
  letter-spacing:1px;
}

.step{
  flex:1;
  text-align:center;
  opacity:.3;
}

.step.active{
  color:#c6a14a;
  opacity:1;
}

.error{
  font-size:12px;
  color:#c64a4a;
  margin-bottom:10px;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px);}
  to{opacity:1;transform:translateY(0);}
}

@media(max-width:900px){
  .container{flex-direction:column;}
  .right{position:relative;top:0;}
}
</style>
</head>
<body>

<div class="container">

<div class="left">

<div class="steps">
  <div class="step active">Carrito</div>
  <div class="step active">Datos</div>
  <div class="step">Pago</div>
  <div class="step">Confirmación</div>
</div>

<h2>Contacto</h2>
<input type="email" id="email" placeholder="Email">
<div id="emailError" class="error"></div>

<h2>Envío</h2>
<input type="text" id="nombre" placeholder="Nombre completo">
<input type="text" placeholder="Dirección">
<input type="text" placeholder="Ciudad">
<input type="text" placeholder="Código postal">

<button class="btn" onclick="pagar()">Pagar con Mercado Pago</button>

</div>

<div class="right">

<h2>Tu Pedido</h2>
<div id="productos"></div>

<div class="total">
<span>Total</span>
<span id="total">$0</span>
</div>

</div>

</div>

<script>

const CART_KEY = "bc_cart";
const MP_LINK = "https://link.mercadopago.com.ar/baraandco";
function getCart(){
  return JSON.parse(localStorage.getItem(CART_KEY)) || [];
}

function renderResumen(){
  const cart = getCart();
  const cont = document.getElementById("productos");
  const totalEl = document.getElementById("total");

  cont.innerHTML="";
  let total=0;

  cart.forEach(item=>{
    const sub=item.precio*item.qty;
    total+=sub;

    cont.innerHTML+=`
      <div class="summary-item">
        <span>${item.nombre} x${item.qty}</span>
        <span>$${sub.toLocaleString("es-AR")}</span>
      </div>
    `;
  });

  totalEl.textContent="$"+total.toLocaleString("es-AR");
}

function validarEmail(email){
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function pagar(){
  const email=document.getElementById("email").value;
  const error=document.getElementById("emailError");

  if(!validarEmail(email)){
    error.textContent="Ingresá un email válido.";
    return;
  }

  error.textContent="";
  window.location.href=MP_LINK;
}

document.addEventListener("DOMContentLoaded",renderResumen);

</script>

</body>
</html>
